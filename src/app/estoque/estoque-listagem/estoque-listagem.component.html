<div class="container">
  <form>
    <div class="card">
      <div class="card-header text-white bg-primary">
        <h4>Estoques</h4>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6 form-group">
            <label for="estoqueUnidade" class="form-label">Selecione o estoque:</label>
            <!-- Adicionado o ngModel para vincular a variável estoque -->
            <select class="form-control" name="estoqueUnidade" [(ngModel)]="estoque">
              <!-- Loop removido, ngFor não é suportado em elementos <select> -->
              <!-- Mantém [ngValue] -->
              <option *ngFor="let e of estoques" [ngValue]="e">{{ e.unidade.nome }} ({{ e.vacina.nome }})</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 form-group">
            <label for="btnLimpar" class="form-label">&nbsp;</label>
            <button type="button" class="btn btn-warning" (click)="limpar()">Consultar Todos</button>
          </div>
        </div>
      </div>
    </div>
  </form>
  <h2 class="">Estoque</h2>
  <br><br>

  <table class="table table-hover table-striped">

    <thead>
      <th>Unidade</th>
      <th>Vacina em Estoque</th>
      <th>Quantidade</th>
      <th>Data do Lote</th>
      <th>Validade</th>
      <th>Ações</th>
    </thead>

    <tbody>
      <!-- COMENTÁRIO 1 -->
      <ng-container *ngIf="estoque !== null">
        <tr>
          <td>{{ estoque.unidade.nome }}</td>
          <td>{{ estoque.vacina.nome }}</td>
          <td>{{ estoque.quantidade }}</td>
          <td>{{ estoque.dataLote | date: 'dd/MM/yyyy' }}</td>
          <td>{{ estoque.validade | date: 'dd/MM/yyyy' }}</td>
          <div class="row">
            <div class="col-md-4">
              <button class="btn btn-primary btn-block" (click)="editar(estoque)">
                <i class="bi bi-x"></i>Editar</button>
            </div>
            <div class="col-md-4">
              <button class="btn btn-danger btn-block"(click)="excluir(estoque)">
                <i class="bi bi-x"></i>Excluir</button>
            </div>
          </div>
        </tr>
      </ng-container>

      <!-- Caso não haja estoque pesquisado, exibe a lista de estoques -->
      <!-- Ajustado para verificar se estoques é definido -->
      <ng-container *ngIf="estoque === null && estoques">
        <tr *ngFor="let estoque of estoques">
          <td>{{ estoque.unidade.nome }}</td>
          <td>{{ estoque.vacina.nome }}</td>
          <td>{{ estoque.quantidade }}</td>
          <td>{{ estoque.dataLote | date: 'dd/MM/yyyy' }}</td>
          <td>{{ estoque.validade | date: 'dd/MM/yyyy' }}</td>
          <div class="row">
            <div class="col-md-4">
              <button class="btn btn-primary btn-block" (click)="editar(estoque)">
                <i class="bi bi-x"></i>Editar</button>
            </div>
            <div class="col-md-4">
              <button class="btn btn-danger btn-block"(click)="excluir(estoque)">
                <i class="bi bi-x"></i>Excluir</button>
            </div>
          </div>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>

<!--
COMENTÁRIO 1:

A tag <ng-container> é uma diretiva estrutural
do Angular que é usada como um marcador de lugar
no HTML. Ela não é renderizada como um elemento
HTML real no DOM final, o que significa que não
adiciona nenhuma marcação extra à sua página.
Em vez disso, é útil para agrupar elementos sem
adicionar qualquer nó extra ao DOM.

A <ng-container> é comumente usada em situações onde
  você precisa aplicar diretivas estruturais,
  como *ngIf e *ngFor, a um conjunto de elementos
  adjacentes sem adicionar uma div ou outro elemento
  ao DOM. Isso é útil para manter seu HTML limpo e semântico.

No exemplo que você forneceu, <ng-container> é usado para
  condicionalmente renderizar(ou não renderizar) uma linha de tabela (<tr>)
    com base na existência do objeto estoque. Dentro dessa
    <ng-container>, você tem elementos <td> para exibir as
      propriedades do estoque, bem como botões para editar
      e excluir o estoque. Usar <ng-container> dessa maneira
        permite aplicar a lógica condicional diretamente aos
        elementos da tabela sem adicionar uma div ou outro
        elemento ao DOM.
-->
